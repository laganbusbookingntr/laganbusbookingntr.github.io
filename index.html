<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Lagan Seat Lookup</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<style>
:root{
  --blue:#3a7bd5;
  --blue2:#67b8f7;
  --bg:#eef3f8;
  --card:#ffffff;
  --text:#1b2733;
  --muted:#66788A;
  --border:#dce4ec;
}

*{box-sizing:border-box;}

body{
  margin:0;
  padding:28px;
  background:var(--bg);
  font-family:"Poppins", sans-serif;
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
  color:var(--text);
}

.wrap{
  width:100%;
  max-width:640px;
}

.header{
  text-align:center;
  margin-bottom:10px;
}
.brand{
  font-size:1.6rem;
  font-weight:800;
  color:var(--blue);
}
.sub{
  color:var(--muted);
  margin-top:4px;
}

.card{
  background:var(--card);
  padding:22px;
  border-radius:14px;
  box-shadow:0 6px 20px rgba(0,0,0,0.06);
  border:1px solid var(--border);
}

.input{
  width:100%;
  padding:14px;
  border-radius:10px;
  border:1px solid var(--border);
  font-size:1rem;
}

.btn{
  width:100%;
  padding:14px;
  margin-top:12px;
  border-radius:10px;
  border:none;
  background:linear-gradient(180deg,var(--blue2),var(--blue));
  color:white;
  font-weight:700;
  font-size:1rem;
  cursor:pointer;
  box-shadow:0 6px 14px rgba(58,123,213,0.25);
}

#box{
  margin-top:20px;
  background:white;
  padding:20px;
  border-radius:14px;
  border:1px solid var(--border);
  box-shadow:0 4px 14px rgba(0,0,0,0.07);
}

.row{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:18px;
}
.left{flex:1}

#bname{
  font-size:1.4rem;
  font-weight:800;
  color:#204264;
}
#dtime{
  color:var(--muted);
  margin-top:6px;
  font-weight:600;
}
#pickup,#pay{
  margin-top:10px;
  font-size:0.95rem;
  color:#3a4653;
}

/* ROUND SEAT BADGES WITH ICON (STYLE A) */
.right{
  display:flex;
  flex-direction:column;
  gap:14px;
  align-items:center;
  justify-content:center;
}

.seat{
  width:86px;
  height:86px;
  border-radius:50%;
  background:linear-gradient(180deg,#e7f3ff,#b6d8ff);
  border:1px solid #c7dff4;
  box-shadow:0 8px 18px rgba(0,0,0,0.10);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  font-weight:800;
  font-size:1.3rem;
  color:#1b2733;
  text-align:center;
}

.seat span{
  font-size:26px;
  margin-bottom:2px;
  display:block;
}

/* MOBILE */
@media(max-width:520px){
  .row{
    flex-direction:column;
    text-align:center;
  }
  .right{
    flex-direction:row;
    flex-wrap:wrap;
  }
}

.footer{
  text-align:center;
  margin-top:14px;
  font-size:0.95rem;
  color:#8b9aad;
}
</style>
</head>

<body>

<div class="wrap">

  <div class="header">
    <div class="brand">Lagan Seat Lookup</div>
    <div class="sub">For Reservations: <strong>0777 402 886</strong></div>
  </div>

  <div class="card">

    <input id="p" class="input" placeholder="Enter Phone Number (0777...)">
    <button class="btn" onclick="search()">Check My Booking</button>

    <div id="box" style="display:none">

      <div class="row">

        <!-- Left Info -->
        <div class="left">
          <div id="bname">Bus Name</div>
          <div id="dtime">Date â€¢ Time</div>
          <div id="pickup">Pickup â€”</div>
          <div id="pay">Payment â€”</div>
        </div>

        <!-- Right Seats -->
        <div id="seatsBox" class="right"></div>

      </div>

    </div>

    <div class="footer">Made by <strong>WEDOXA</strong></div>

  </div>
</div>


<script>
const SCRIPT_URL="https://script.google.com/macros/s/AKfycbwtADuWek0zWGZROj4HRsS_h-WRjhMRMCShOmaAxnReTULgHHiFPA-hEDQa2v6iQYPPnA/exec";

function search(){
  const phone=document.getElementById('p').value.trim();
  if(!phone){
    Swal.fire("Please enter phone number");
    return;
  }

  Swal.fire({title:"Loading...",didOpen:()=>Swal.showLoading(),allowOutsideClick:false});

  fetch(SCRIPT_URL+"?phone="+encodeURIComponent(phone))
  .then(r=>r.json())
  .then(d=>{
    Swal.close();
    if(!d.success){
      Swal.fire("No Booking Found");
      return;
    }
    render(d.booking);
  })
  .catch(()=>{
    Swal.close();
    Swal.fire("Error connecting to server");
  });
}

function render(b){
  document.getElementById("box").style.display="block";

  document.getElementById("bname").innerText=b.Bus||"-";

  let d=b.Date||"";
  if(typeof d==="string" && d.includes("T")) d=d.split("T")[0];
  document.getElementById("dtime").innerText=d+" â€¢ "+(b.Time||"-");

  document.getElementById("pickup").innerText="Pickup â€” "+(b.Pickup||"-");
  document.getElementById("pay").innerText="Payment â€” "+(b.Payment||"-");

  const seatBox=document.getElementById("seatsBox");
  seatBox.innerHTML="";

  const seats=String(b.Seat||"").split(/[, ]+/).filter(x=>x);

  if(seats.length===0){
    seatBox.innerHTML='<div class="seat"><span>ðŸ’º</span>-</div>';
    return;
  }

  seats.forEach(s=>{
    let el=document.createElement("div");
    el.className="seat";

    // STYLE A: seat icon + number
    el.innerHTML = `<span>ðŸ’º</span>${s}`;

    seatBox.appendChild(el);
  });
}
</script>

</body>
</html>

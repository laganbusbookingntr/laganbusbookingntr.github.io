<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Lagan Bus Booking ‚Äî Check Your Seat</title>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<style>
:root{
  --blue:#3a7bd5;
  --blue2:#67b8f7;
  --blue-dark:#1a5cb0;
  --bg:#eef3f8;
  --muted:#66788A;
  --border:#dce4ec;
  --road-dark:#333;
  --lane-white:#fff;
  --success:#10b981;
  --danger:#ef4444;
}

*{box-sizing:border-box;margin:0;padding:0;font-family:'Segoe UI', system-ui, -apple-system, sans-serif}

body{ 
  background: linear-gradient(135deg, #f5f7fa 0%, #eef3f8 100%);
  display:flex; 
  justify-content:center; 
  align-items:center;
  min-height:100vh;
  padding:14px;
}

/* Sky Animation - Keep original */
.sky-container{
  width:100%;max-width:860px;height:150px;margin:0 auto 14px;border-radius:14px;position:relative;overflow:hidden;
  animation: skyCycle 20s linear infinite;
}
@keyframes skyCycle{
  0%   { background:linear-gradient(#bfe4ff,#eaf6ff); }
  20%  { background:linear-gradient(#ffcf9b,#ffa96e); }
  40%  { background:linear-gradient(#2e3160,#1b1d38); }
  60%  { background:linear-gradient(#000010,#000); }
  80%  { background:linear-gradient(#8f6cff,#ffcaf9); }
  100% { background:linear-gradient(#bfe4ff,#eaf6ff); }
}

.sun{ width:70px;height:70px;border-radius:50%; background:#FFD93D; position:absolute; left:28px; bottom:-20px; box-shadow:0 0 22px rgba(255,217,61,0.7); animation:sunCycle 20s linear infinite; }
@keyframes sunCycle{ 0%{transform:translateY(40px);opacity:1} 25%{transform:translateY(-10px);opacity:1} 40%{opacity:0} 70%{opacity:0} 90%{opacity:1;transform:translateY(-10px)} 100%{opacity:1;transform:translateY(40px)} }

.moon{ width:55px;height:55px;border-radius:50%; background:#fff; position:absolute; right:40px; top:24px; box-shadow:0 0 12px rgba(255,255,255,0.7); opacity:0; animation:moonCycle 20s linear infinite;}
@keyframes moonCycle{ 0%,30%{opacity:0} 45%,70%{opacity:1} 85%,100%{opacity:0} }

.cloud{ position:absolute; width:70px;height:30px;background:#fff;border-radius:40px; box-shadow:25px 10px 0 #fff,45px 15px 0 #fff; opacity:.88; animation: cloudMove 30s linear infinite; }
.c1{ top:25px; left:-120px; animation-delay:-5s } 
.c2{ top:45px; left:8%; transform:scale(1.15); animation-delay:-12s }
.c3{ top:60px; left:60%; transform:scale(0.92); animation-delay:-18s } 
.c4{ top:35px; left:82%; transform:scale(1.05); animation-delay:-22s }
@keyframes cloudMove{ 0%{ left:-120px } 100%{ left:120% } }

.stars{ position:absolute; top:0; left:0; width:100%; height:100%;
  background:
    radial-gradient(2px 2px at 20% 30%, rgba(255,255,255,0.95) 90%, transparent),
    radial-gradient(2px 2px at 60% 50%, rgba(255,255,255,0.9) 90%, transparent),
    radial-gradient(2px 2px at 80% 40%, rgba(255,255,255,0.85) 90%, transparent),
    radial-gradient(2px 2px at 30% 80%, rgba(255,255,255,0.85) 90%, transparent);
  opacity:0; animation: starCycle 20s linear infinite; }
@keyframes starCycle{ 0%,30%{opacity:0} 40%,70%{opacity:1} 90%,100%{opacity:0} }

.shooting-star{ position:absolute;width:3px;height:3px;border-radius:50%; background:white; top:20px; left:-100px; opacity:0; animation: shoot 5s ease-in-out infinite; }
@keyframes shoot{ 0%{opacity:0;transform:translate(0,0)} 10%{opacity:1} 40%{opacity:1;transform:translate(300px,80px)} 60%{opacity:.4} 100%{opacity:0;transform:translate(520px,140px)} }

/* Road Animation - Keep original */
.road-container{ width:100%; max-width:860px; height:110px; margin:0 auto 20px; position:relative; overflow:hidden; }
.road{ width:260%; height:18px; background:repeating-linear-gradient(to right, var(--road-dark) 0, var(--road-dark) 40px, var(--lane-white) 40px, var(--lane-white) 80px); position:absolute; bottom:8px; left:0; animation: roadMove 5s linear infinite; box-shadow: inset 0 -6px 12px rgba(0,0,0,0.15);}
@keyframes roadMove{ from{transform:translateX(0)} to{transform:translateX(-20%)} }

.lane-glow{ position:absolute; bottom:14px; left:0; width:100%; height:6px; background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0)); mix-blend-mode:screen; opacity:0.8; }

/* Bus Animation - Keep original */
.bus-wrap{
  position:absolute;
  left:100vw; bottom:30px; width:220px; height:140px; pointer-events:none;
  display:flex; align-items:flex-end; justify-content:center; transform-origin:center;
  animation: wrapMove 12s linear infinite;
  animation-delay:2s;
}

@keyframes wrapMove{
  0%{ transform: translateX(0) }
  100%{ transform: translateX(-140vw) }
}

.bus{ position:relative; display:flex; align-items:center; justify-content:center; transform-origin:center; font-size:48px; transform:scale(1); z-index:4; }
.bus .emoji{ display:inline-block; animation: busBounce 0.7s ease-in-out infinite; transform-origin:center; }
@keyframes busBounce{ 0%,100%{ transform:translateY(0)} 50%{ transform:translateY(-2px)} }

.beam{ position:absolute; right:-26px; width:170px; height:46px; border-radius:10px; background: linear-gradient(90deg, rgba(255,255,200,0.0), rgba(255,255,200,0.12), rgba(255,255,200,0.06)); filter:blur(6px); opacity:0; mix-blend-mode:screen; transform:skewX(-12deg); box-shadow:0 0 40px rgba(255,230,160,0.12); animation: beamCycle 20s linear infinite; z-index:3; }

.ref{ position:absolute; bottom:-12px; left:50%; transform:translateX(-50%); width:150px; height:22px; border-radius:50%; background: radial-gradient(closest-side, rgba(255,230,160,0.14), rgba(255,230,160,0.06), rgba(0,0,0,0)); filter:blur(6px); opacity:0; animation: beamCycle 20s linear infinite; z-index:2; }

@keyframes beamCycle{ 0%{opacity:0} 35%{opacity:0} 40%{opacity:1} 60%{opacity:1} 70%{opacity:0} 100%{opacity:0} }

.shadow{
  position:absolute;
  bottom:6px;
  left:50%;
  transform:translateX(-50%) scale(1);
  width:170px;
  height:20px;
  border-radius:50%;
  background:rgba(0,0,0,0.32);
  filter:blur(8px);
  opacity:0.85;
  pointer-events:none;
  z-index:1;
  animation: shadowDynamics 12s linear infinite;
}

@keyframes shadowDynamics{
  0% { transform:translateX(-50%) scale(1.7); opacity:0.30; filter:blur(12px); }
  25%{ transform:translateX(-50%) scale(1.25); opacity:0.65; filter:blur(8px); }
  50%{ transform:translateX(-50%) scale(1.0); opacity:0.95; filter:blur(4px); }
  75%{ transform:translateX(-50%) scale(1.25); opacity:0.6; filter:blur(8px); }
  100%{ transform:translateX(-50%) scale(1.7); opacity:0.30; filter:blur(12px); }
}

/* ================= IMPROVED UI ================= */
.wrap{ 
  width:100%; 
  max-width:760px; 
  animation: fadeIn 0.5s ease;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Header */
.header{
  text-align:center;
  margin-bottom:20px;
  padding:15px;
  background: rgba(255,255,255,0.9);
  border-radius: 15px;
  box-shadow: 0 5px 15px rgba(0,0,0,0.05);
  backdrop-filter: blur(10px);
}

.brand{ 
  font-weight:800; 
  font-size:1.8rem; 
  color:var(--blue-dark);
  margin-bottom:5px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
}

.welcome{ 
  margin-top:6px; 
  font-weight:600;
  color: #444;
  font-size: 1.1rem;
}

.sub{ 
  color:var(--muted); 
  margin-top:8px; 
  font-size:0.95rem;
  background: rgba(58, 123, 213, 0.1);
  padding: 8px 15px;
  border-radius: 50px;
  display: inline-block;
}

/* Card */
.card{ 
  background:#fff; 
  padding:25px; 
  border-radius:15px; 
  border:1px solid var(--border); 
  box-shadow:0 10px 30px rgba(9,20,40,0.08);
  transition: transform 0.3s ease;
}

.card:hover {
  transform: translateY(-5px);
}

.input{ 
  width:100%; 
  padding:15px; 
  border-radius:10px; 
  border:2px solid #e0e0e0;
  font-size:16px;
  transition: all 0.3s;
  background: #f8f9fa;
}

.input:focus {
  outline: none;
  border-color: var(--blue);
  background: white;
  box-shadow: 0 0 0 3px rgba(58, 123, 213, 0.1);
}

.btn{ 
  width:100%; 
  margin-top:15px; 
  padding:15px; 
  border-radius:10px; 
  border:none; 
  background:linear-gradient(135deg, var(--blue2), var(--blue)); 
  color:#fff; 
  font-weight:700; 
  font-size:1rem;
  cursor:pointer;
  transition: all 0.3s;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

.btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(58, 123, 213, 0.3);
}

.btn:active {
  transform: translateY(0);
}

/* Results Box */
#box{ 
  margin-top:20px; 
  padding:20px; 
  border-radius:12px; 
  border:1px solid var(--border); 
  background: #f8fafc;
  display:none;
  animation: slideIn 0.5s ease;
}

@keyframes slideIn {
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
}

.booking-detail {
  background: white;
  padding: 15px;
  border-radius: 10px;
  margin-bottom: 12px;
  box-shadow: 0 3px 8px rgba(0,0,0,0.05);
}

.detail-label {
  font-size: 12px;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 5px;
  font-weight: 600;
}

.detail-value {
  font-size: 16px;
  font-weight: 700;
  color: var(--blue-dark);
}

/* Seats */
.right{ 
  display:flex; 
  gap:15px; 
  flex-wrap:wrap; 
  justify-content:center; 
  margin-top:15px 
}

.seat{ 
  width:90px; 
  height:90px; 
  border-radius:50%; 
  display:flex; 
  align-items:center; 
  justify-content:center; 
  flex-direction:column; 
  background:linear-gradient(135deg, #e7f3ff, #b6d8ff);
  border:2px solid #c7dff4; 
  font-weight:900; 
  font-size:1.15rem;
  transition: all 0.3s;
  box-shadow: 0 5px 15px rgba(103, 184, 247, 0.2);
}

.seat:hover {
  transform: scale(1.1) rotate(5deg);
  box-shadow: 0 8px 20px rgba(103, 184, 247, 0.3);
}

.seat span{ 
  font-size:28px;
  margin-bottom: 5px;
}

.seat-number {
  font-size: 18px;
  font-weight: 800;
  color: var(--blue-dark);
}

/* Feedback */
#feedbackBox{ 
  margin-top:20px; 
  display:none; 
  text-align:center; 
  padding:20px; 
  border-radius:12px; 
  background:#f7fbff; 
  border:1px solid #dbeeff;
  animation: fadeIn 0.5s ease;
}

.feedback-title {
  font-weight:700;
  margin-bottom:15px;
  color: var(--blue-dark);
  font-size: 1.1rem;
}

.fb-row{ 
  display:flex; 
  gap:15px; 
  justify-content:center; 
  margin-top:10px 
}

.fb-btn{ 
  padding:12px 25px; 
  border-radius:10px; 
  border:2px solid #cfe3ff; 
  background:#fff; 
  font-weight:700; 
  cursor:pointer;
  transition: all 0.3s;
  display: flex;
  align-items: center;
  gap: 8px;
  min-width: 100px;
}

.fb-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}

.fb-btn:first-child:hover {
  background: #e8f5e9;
  border-color: var(--success);
}

.fb-btn:last-child:hover {
  background: #ffebee;
  border-color: var(--danger);
}

/* Footer */
.footer{ 
  text-align:center; 
  margin-top:20px; 
  color:#8b9aad;
  padding-top: 15px;
  border-top: 1px solid #eee;
}

.company {
  font-weight: 800;
  color: var(--blue);
  letter-spacing: 0.5px;
}

/* Status Badge */
.status-badge {
  display: inline-block;
  padding: 3px 10px;
  border-radius: 20px;
  font-size: 11px;
  font-weight: 600;
  margin-left: 8px;
}

.status-paid {
  background: #e8f5e9;
  color: #2e7d32;
}

/* Loading Spinner */
.spinner {
  display: inline-block;
  width: 18px;
  height: 18px;
  border: 2px solid rgba(255,255,255,0.3);
  border-radius: 50%;
  border-top-color: white;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* Responsive */
@media (max-width:520px){
  .bus{ font-size:40px } 
  .sun{ left:10px } 
  .moon{ right:10px; top:18px }
  .card { padding: 20px; }
  .seat { width: 80px; height: 80px; }
  .fb-row { flex-direction: column; }
  .fb-btn { width: 100%; }
}
</style>
</head>
<body>

<div class="wrap">

  <!-- SKY -->
  <div class="sky-container" id="sky">
    <div class="sun"></div>
    <div class="moon"></div>

    <!-- 4 clean clouds -->
    <div class="cloud c1"></div>
    <div class="cloud c2"></div>
    <div class="cloud c3"></div>
    <div class="cloud c4"></div>

    <div class="stars"></div>
    <div class="shooting-star"></div>
  </div>

  <!-- ROAD + BUS -->
  <div class="road-container" id="roadWrap">
    <div class="road"></div>
    <div class="lane-glow"></div>

    <!-- single medium bus wrapper -->
    <div class="bus-wrap" aria-hidden="true">
      <div class="shadow"></div>

      <div class="bus">
        <span class="emoji">üöå</span>
        <div class="beam"></div>
        <div class="ref"></div>
      </div>
    </div>
  </div>

  <!-- Header -->
  <div class="header">
    <div class="brand">
      Welcome To Lagan Bus Booking
    </div>
    <div class="welcome">Safe Travels. May God Bless Your Journey.</div>
    <div class="sub">For Reservations: <strong>0777 402 886 (Mr. Fawas)</strong></div>
  </div>

  <!-- Booking Card -->
  <div class="card">
    <input id="phone" class="input" placeholder="Enter phone number (077‚®Ø‚®Ø‚®Ø)" inputmode="tel" maxlength="10" />
    <button id="searchBtn" class="btn">
      <span>üîç</span>
      Check My Booking
    </button>

    <div id="box">
      <!-- Passenger Name -->
      <div class="booking-detail">
        <div class="detail-label">Passenger</div>
        <div id="passengerName" class="detail-value">-</div>
      </div>
      
      <!-- Bus Name -->
      <div class="booking-detail">
        <div class="detail-label">Bus</div>
        <div id="busName" class="detail-value">-</div>
      </div>
      
      <!-- Date & Time -->
      <div class="booking-detail">
        <div class="detail-label">Date & Time</div>
        <div id="dateTime" class="detail-value">-</div>
      </div>
      
      <!-- Pickup -->
      <div class="booking-detail">
        <div class="detail-label">Pickup Location</div>
        <div id="pickupLocation" class="detail-value">-</div>
      </div>
      
      <!-- Payment -->
      <div class="booking-detail">
        <div class="detail-label">Payment</div>
        <div id="paymentAmount" class="detail-value">-</div>
      </div>

      <!-- Seats -->
      <div style="text-align:center; margin:20px 0 10px;">
        <div style="font-weight:700;color:#444;margin-bottom:15px;font-size:1.1rem;">
          <span>üí∫</span> Your Seat Numbers
        </div>
        <div class="right" id="seatsBox"></div>
      </div>

      <!-- Feedback -->
      <div id="feedbackBox">
        <div class="feedback-title">Did you get your seat number correctly?</div>
        <div class="fb-row">
          <button class="fb-btn" onclick="sendFeedback('Yes')">
            <span>üëç</span> Yes
          </button>
          <button class="fb-btn" onclick="sendFeedback('No')">
            <span>üëé</span> No
          </button>
        </div>
      </div>
    </div>

    <div class="footer">
      Made with <span style="color:#e74c3c;">‚ù§</span> by 
      <span class="company">WEDOXA</span>
    </div>
  </div>
</div>

<script>
// Your Google Apps Script URL
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwKWNQcXnjjzh540oJWgZJsJi1wQMd0PS94pjiHXy7VjlrR95ME2xnveTuDhPvlZScdow/exec";

// Initialize
document.addEventListener('DOMContentLoaded', function() {
  // Phone input validation
  const phoneInput = document.getElementById('phone');
  phoneInput.addEventListener('input', function(e) {
    let value = e.target.value.replace(/\D/g, '');
    if (value.length > 10) {
      value = value.substring(0, 10);
    }
    e.target.value = value;
  });

  // Enter key to search
  phoneInput.addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
      searchBooking();
    }
  });
});

// Search booking
function searchBooking() {
  const phone = document.getElementById('phone').value.trim();
  const btn = document.getElementById('searchBtn');
  
  if (!phone || phone.length < 9) {
    Swal.fire({
      icon: 'warning',
      title: 'Enter Phone Number',
      text: 'Please enter a valid 10-digit phone number',
      confirmButtonColor: '#3a7bd5'
    });
    return;
  }

  // Show loading
  btn.innerHTML = '<div class="spinner"></div> Searching...';
  btn.disabled = true;

  Swal.fire({
    title: 'Finding your booking...',
    allowOutsideClick: false,
    didOpen: () => Swal.showLoading()
  });

  // Fetch from Google Sheets
  fetch(`${SCRIPT_URL}?phone=${encodeURIComponent(phone)}`)
    .then(response => response.json())
    .then(data => {
      btn.innerHTML = '<span>üîç</span> Check My Booking';
      btn.disabled = false;
      Swal.close();

      if (!data.success) {
        Swal.fire({
          icon: 'error',
          title: 'No Booking Found',
          text: 'We could not find a booking with this phone number',
          confirmButtonColor: '#3a7bd5'
        });
        return;
      }

      // Display results
      showBooking(data.booking);
    })
    .catch(error => {
      btn.innerHTML = '<span>üîç</span> Check My Booking';
      btn.disabled = false;
      Swal.close();
      
      Swal.fire({
        icon: 'error',
        title: 'Connection Error',
        text: 'Please check your internet connection and try again',
        confirmButtonColor: '#3a7bd5'
      });
      console.error('Error:', error);
    });
}

// Display booking
function showBooking(b) {
  console.log('Booking data:', b);
  
  // Extract data (handles your exact column names)
  const name = b.Name || '-';
  const bus = b.Bus || '-';
  const time = b.Time || '-';
  const date = b.Date || '-';
  const seat = b.Seat || '';
  const pickup = b.Pickup || '-';
  const payment = b.Payment || '-';

  // Update display with proper formatting
  document.getElementById('passengerName').textContent = name;
  document.getElementById('busName').textContent = bus;
  
  // Format date
  let displayDate = date;
  if (date && date.includes('/')) {
    // Format as DD/MM/YYYY to DD Mon YYYY
    const parts = date.split('/');
    if (parts.length === 3) {
      const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
      const monthName = months[parseInt(parts[1]) - 1] || parts[1];
      displayDate = `${parts[0]} ${monthName} ${parts[2]}`;
    }
  }
  
  document.getElementById('dateTime').textContent = `${displayDate} ‚Ä¢ ${time}`;
  document.getElementById('pickupLocation').textContent = pickup;
  
  // Payment with badge
  const paymentElement = document.getElementById('paymentAmount');
  paymentElement.textContent = payment;
  
  if (payment && (payment.includes('/-') || payment.includes('Paid'))) {
    paymentElement.innerHTML = payment + ' <span class="status-badge status-paid">Paid</span>';
  }

  // Display seats
  const seatsBox = document.getElementById('seatsBox');
  seatsBox.innerHTML = '';
  
  if (seat && seat.trim() !== '' && seat !== 'Not Updated') {
    // Split seats by comma or space
    const seats = seat.split(/[, ]+/).filter(s => s.trim() !== '');
    
    if (seats.length > 0) {
      seats.forEach(seatNum => {
        const seatElement = document.createElement('div');
        seatElement.className = 'seat';
        seatElement.innerHTML = `
          <span>üí∫</span>
          <div class="seat-number">${seatNum.trim()}</div>
        `;
        seatsBox.appendChild(seatElement);
      });
    } else {
      seatsBox.innerHTML = '<div style="color:#666;font-style:italic;">No seat assigned</div>';
    }
  } else {
    seatsBox.innerHTML = '<div style="color:#666;font-style:italic;">No seat assigned</div>';
  }

  // Show results
  document.getElementById('box').style.display = 'block';
  document.getElementById('feedbackBox').style.display = 'block';
  
  // Smooth scroll to results
  setTimeout(() => {
    document.getElementById('box').scrollIntoView({
      behavior: 'smooth',
      block: 'start'
    });
  }, 300);
}

// Send feedback
function sendFeedback(answer) {
  const phone = document.getElementById('phone').value.trim();
  const feedbackBox = document.getElementById('feedbackBox');
  
  // Show sending state
  const originalHTML = feedbackBox.innerHTML;
  feedbackBox.innerHTML = `
    <div style="text-align:center; padding:10px;">
      <div class="spinner" style="margin:0 auto 10px;"></div>
      <p>Sending feedback...</p>
    </div>
  `;

  // Send to Google Sheets
  fetch(`${SCRIPT_URL}?action=feedback&phone=${encodeURIComponent(phone)}&answer=${encodeURIComponent(answer)}`)
    .then(response => response.json())
    .then(data => {
      if (data.success) {
        // Hide feedback with animation
        feedbackBox.style.opacity = '0';
        feedbackBox.style.transition = 'opacity 0.3s ease';
        setTimeout(() => {
          feedbackBox.style.display = 'none';
          feedbackBox.innerHTML = originalHTML;
        }, 300);
        
        // Thank you message
        Swal.fire({
          icon: 'success',
          title: 'Thank You!',
          text: 'Your feedback has been recorded.',
          confirmButtonColor: '#3a7bd5',
          timer: 1500,
          showConfirmButton: false
        });
      } else {
        feedbackBox.innerHTML = originalHTML;
        Swal.fire({
          icon: 'error',
          title: 'Failed',
          text: 'Could not send feedback. Please try again.',
          confirmButtonColor: '#3a7bd5'
        });
      }
    })
    .catch(error => {
      feedbackBox.innerHTML = originalHTML;
      Swal.fire({
        icon: 'error',
        title: 'Error',
        text: 'Please check your connection and try again.',
        confirmButtonColor: '#3a7bd5'
      });
    });
}

// Add event listener
document.getElementById('searchBtn').addEventListener('click', searchBooking);

/* Soft lightning overlay */
(function softLightning(){
  const el = document.createElement('div');
  el.style.position='fixed';
  el.style.top='0'; el.style.left='0'; el.style.width='100%'; el.style.height='100%';
  el.style.pointerEvents='none'; el.style.zIndex='6'; el.style.mixBlendMode='overlay';
  document.body.appendChild(el);
  function flash(){ 
    el.animate([
      {opacity:0},
      {opacity:0.7},
      {opacity:0}
    ], {
      duration: 300,
      easing: 'ease-out'
    }); 
  }
  setInterval(() => { 
    if(Math.random() < 0.15) flash(); 
  }, 5000);
})();

/* Respect reduced-motion */
if(window.matchMedia('(prefers-reduced-motion: reduce)').matches){
  document.querySelectorAll('*').forEach(n => { 
    n.style.animation = 'none'; 
    n.style.transition = 'none'; 
  });
}
</script>
</body>
</html>
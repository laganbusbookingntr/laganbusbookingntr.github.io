<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Lagan Bus Booking â€“ Animated Clean Sky</title>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<style>
:root{
  --blue:#3a7bd5;
  --blue2:#67b8f7;
  --bg:#eef3f8;
  --muted:#66788A;
  --border:#dce4ec;
}

/* RESET */
*{margin:0;padding:0;box-sizing:border-box}

/* ======================================================
   SKY + DAY/NIGHT ANIMATION
====================================================== */
.sky-container{
  width:100%;max-width:820px;height:150px;
  margin:0 auto 14px auto;
  overflow:hidden;border-radius:16px;
  position:relative;
  animation: skyCycle 20s linear infinite;
}

@keyframes skyCycle{
  0% { background:linear-gradient(#bfe4ff,#eaf6ff); }
  20%{ background:linear-gradient(#ffcf9b,#ffa96e); }
  40%{ background:linear-gradient(#2e3160,#1b1d38); }
  60%{ background:linear-gradient(#000010,#000); }
  80%{ background:linear-gradient(#8f6cff,#ffcaf9); }
  100%{ background:linear-gradient(#bfe4ff,#eaf6ff); }
}

/* SUN */
.sun{
  width:70px;height:70px;border-radius:50%;
  background:#FFD93D;
  position:absolute;left:30px;bottom:-20px;
  box-shadow:0 0 22px rgba(255,217,61,0.7);
  animation:sunCycle 20s linear infinite;
}
@keyframes sunCycle{
  0%{transform:translateY(40px);opacity:1}
  25%{transform:translateY(-10px);opacity:1}
  40%{opacity:0}
  70%{opacity:0}
  90%{opacity:1;transform:translateY(-10px)}
  100%{opacity:1;transform:translateY(40px)}
}

/* MOON */
.moon{
  width:55px;height:55px;border-radius:50%;
  background:white;
  position:absolute;right:40px;top:28px;
  opacity:0;
  box-shadow:0 0 12px rgba(255,255,255,0.7);
  animation:moonCycle 20s linear infinite;
}
@keyframes moonCycle{
  0%,30%{opacity:0}
  45%,70%{opacity:1}
  85%,100%{opacity:0}
}

/* ======================================================
   CLEAN CLOUD SYSTEM (4 clouds only)
====================================================== */
.cloud{
  position:absolute;
  width:70px;height:30px;
  background:white;
  border-radius:40px;
  box-shadow:25px 10px 0 white,45px 15px 0 white;
  opacity:.85;
  animation: cloudMove 30s linear infinite;
}

.c1{ top:25px; left:-120px; animation-delay:-5s; }
.c2{ top:45px; left:20%; transform:scale(1.2); animation-delay:-12s; }
.c3{ top:60px; left:60%; transform:scale(0.9); animation-delay:-18s; }
.c4{ top:35px; left:80%; transform:scale(1.1); animation-delay:-25s; }

@keyframes cloudMove{
  0%{ left:-120px }
  100%{ left:120% }
}

/* ======================================================
   STARS + SHOOTING STAR
====================================================== */
.stars{
  position:absolute;top:0;left:0;width:100%;height:100%;
  background:
    radial-gradient(2px 2px at 20% 30%, white 90%, transparent),
    radial-gradient(2px 2px at 60% 50%, white 90%, transparent),
    radial-gradient(2px 2px at 80% 40%, white 90%, transparent),
    radial-gradient(2px 2px at 30% 80%, white 90%, transparent);
  opacity:0;
  animation: starCycle 20s linear infinite;
}
@keyframes starCycle{
  0%,30%{opacity:0}
  40%,70%{opacity:1}
  90%,100%{opacity:0}
}

.shooting-star{
  width:3px;height:3px;border-radius:50%;
  background:white;position:absolute;
  top:20px;left:-100px;opacity:0;
  animation: shoot 5s ease-in-out infinite;
}
@keyframes shoot{
  0%{opacity:0;transform:translate(0,0)}
  10%{opacity:1}
  40%{opacity:1;transform:translate(300px,80px)}
  60%{opacity:.4}
  100%{opacity:0;transform:translate(520px,140px)}
}

/* ======================================================
   ROAD + 3 BUS SYSTEM (RIGHT â†’ LEFT)
====================================================== */

.road-container{
  width:100%;max-width:820px;height:75px;
  margin:0 auto 20px auto;
  overflow:hidden;position:relative;
}

.road{
  width:260%;height:10px;
  background:repeating-linear-gradient(
    to right,#444 0,#444 40px,#fff 40px,#fff 80px
  );
  position:absolute;bottom:0;
  animation: roadMove 5s linear infinite;
}

@keyframes roadMove{
  from{transform:translateX(0)}
  to{transform:translateX(-20%)}
}

/* BUSES (3 continuous) */
.bus-anim{
  font-size:48px;
  position:absolute;
  bottom:20px;
  left:100vw;
  animation: busDrive 12s linear infinite;
}
.b1{animation-delay:0s;}
.b2{animation-delay:4s;}
.b3{animation-delay:8s;}

@keyframes busDrive{
  0%{transform:translateX(0)}
  40%{transform:translateX(-40vw)}
  70%{transform:translateX(-75vw)}
  100%{transform:translateX(-130vw)}
}

/* SHADOWS for each bus */
.bus-shadow{
  width:80px;height:14px;border-radius:50%;
  background:rgba(0,0,0,0.25);
  filter:blur(5px);
  position:absolute;
  bottom:12px;left:100vw;
  animation: shadowDrive 12s linear infinite;
}

.s1{animation-delay:0s;}
.s2{animation-delay:4s;}
.s3{animation-delay:8s;}

@keyframes shadowDrive{
  0%{transform:translateX(0) scale(1)}
  50%{transform:translateX(-50vw) scale(1.2)}
  100%{transform:translateX(-130vw) scale(1)}
}

/* ======================================================
   MAIN UI
====================================================== */

body{
  background:var(--bg);
  display:flex;justify-content:center;padding:12px;
}

.wrap{width:100%;max-width:720px;}

.header{text-align:center;margin-bottom:12px}
.brand{font-size:1.6rem;font-weight:800;color:var(--blue)}
.welcome{font-size:1.1rem;font-weight:600;margin-top:6px}
.sub{color:var(--muted)}

.card{
  background:white;padding:22px;border-radius:14px;
  border:1px solid var(--border);
  box-shadow:0 8px 20px rgba(0,0,0,0.06);
}

.input{
  width:100%;padding:14px;border-radius:10px;
  border:1px solid var(--border);
}
.btn{
  width:100%;padding:14px;margin-top:10px;
  border:none;border-radius:10px;
  background:linear-gradient(var(--blue2),var(--blue));
  color:white;font-weight:700;cursor:pointer;
}

#box{
  margin-top:16px;padding:18px;border:1px solid var(--border);
  border-radius:12px;background:white;display:none;
}

/* SEATS */
.right{display:flex;gap:12px;flex-wrap:wrap;justify-content:center}
.seat{
  width:92px;height:92px;border-radius:50%;
  background:linear-gradient(#e7f3ff,#b6d8ff);
  border:1px solid #c7dff4;
  display:flex;flex-direction:column;
  justify-content:center;align-items:center;
  font-size:1.3rem;font-weight:900;
}
.seat span{font-size:30px}

#feedbackBox{
  margin-top:16px;padding:16px;border-radius:12px;
  background:#f7fbff;border:1px solid #dbeeff;
  display:none;text-align:center;
}

.fb-row{display:flex;gap:14px;justify-content:center}
.fb-btn{
  padding:12px 18px;border-radius:12px;
  border:1px solid #cfe3ff;background:white;
  font-weight:700;cursor:pointer;
}
.fb-yes{color:#0b7a3d;border-color:#bfe8cf}
.fb-no{color:#b82828;border-color:#f2b7b7}

.footer{text-align:center;margin-top:16px;color:#8b9aad}
</style>
</head>

<body>

<div class="wrap">

  <!-- SKY -->
  <div class="sky-container">
    <div class="sun"></div>
    <div class="moon"></div>

    <!-- CLEAN CLOUDS (4 clouds only) -->
    <div class="cloud c1"></div>
    <div class="cloud c2"></div>
    <div class="cloud c3"></div>
    <div class="cloud c4"></div>

    <div class="stars"></div>
    <div class="shooting-star"></div>
  </div>

  <!-- ROAD + 3 BUSES -->
  <div class="road-container">
    <div class="road"></div>

    <!-- Shadows -->
    <div class="bus-shadow s1"></div>
    <div class="bus-shadow s2"></div>
    <div class="bus-shadow s3"></div>

    <!-- Buses -->
    <div class="bus-anim b1">ðŸšŒ</div>
    <div class="bus-anim b2">ðŸšŒ</div>
    <div class="bus-anim b3">ðŸšŒ</div>
  </div>

  <!-- HEADER -->
  <div class="header">
    <div class="brand">Lagan Bus Booking</div>
    <div class="welcome">Welcome to Lagan Bus Booking</div>
    <div class="sub">For Reservations: <strong>0777 402 886 (Mr. Fawas)</strong></div>
  </div>

  <!-- SEARCH CARD -->
  <div class="card">
    <input id="phone" class="input" placeholder="Enter phone number (0777...)">
    <button class="btn" id="searchBtn">Check My Booking</button>

    <div id="box">
      <div id="bname" style="font-size:1.4rem;font-weight:800;margin-bottom:6px"></div>
      <div id="dtime"></div>
      <div id="pickup" style="margin-top:8px"></div>
      <div id="pay" style="margin-top:8px"></div>

      <div class="right" id="seatsBox"></div>

      <div id="feedbackBox">
        <div style="font-weight:700;margin-bottom:10px;">Did you get your seat number correctly?</div>
        <div class="fb-row">
          <button class="fb-btn fb-yes" onclick="sendFeedback('Yes')">ðŸ˜Š Yes</button>
          <button class="fb-btn fb-no" onclick="sendFeedback('No')">ðŸ˜• No</button>
        </div>
      </div>
    </div>

    <div class="footer">Made by <strong>WEDOXA</strong></div>
  </div>

</div>

<script>
const SCRIPT_URL="https://script.google.com/macros/s/AKfycbwKWNQcXnjjzh540oJWgZJsJi1wQMd0PS94pjiHXy7VjlrR95ME2xnveTuDhPvlZScdow/exec";

document.getElementById('searchBtn').onclick = search;

function search(){
  const phone=document.getElementById('phone').value.trim();
  if(!phone){ Swal.fire("Enter phone number"); return; }

  Swal.fire({title:"Checking...",didOpen:()=>Swal.showLoading()});

  fetch(`${SCRIPT_URL}?phone=${phone}`)
    .then(r=>r.json())
    .then(j=>{
      Swal.close();
      if(!j.success){ Swal.fire("No booking found"); return; }
      show(j.booking);
    });
}

function show(b){
  document.getElementById('box').style.display="block";
  document.getElementById('feedbackBox').style.display="block";

  let date=b.Date||"";
  if(date.includes("T")) date=date.split("T")[0];

  document.getElementById('bname').innerText=b.Bus||"-";
  document.getElementById('dtime').innerText=`${date} â€¢ ${b.Time||"-"}`;
  document.getElementById('pickup').innerText="Pickup â€” "+(b.Pickup||"-");
  document.getElementById('pay').innerText="Payment â€” "+(b.Payment||"-");

  const seats=document.getElementById('seatsBox');
  seats.innerHTML="";

  (String(b.Seat||"").split(/[, ]+/).filter(Boolean))
    .forEach(s=>addSeat(s));
}

function addSeat(n){
  const el=document.createElement("div");
  el.className="seat";
  el.innerHTML=`<span>ðŸ’º</span>${n}`;
  document.getElementById('seatsBox').appendChild(el);
}

function sendFeedback(ans){
  const phone=document.getElementById('phone').value.trim();

  fetch(`${SCRIPT_URL}?action=feedback&phone=${phone}&answer=${ans}`)
    .then(r=>r.json())
    .then(j=>{
      if(j.success){
        Swal.fire("Thank you!");
        document.getElementById('feedbackBox').style.display="none";
      }
    });
}
</script>

</body>
</html>
